<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forklift Pre-Use Inspection System</title>
    <script src="https://cdn.sheetjs.com/xlsx-0.19.3/package/dist/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header img {
            height: 80px;
        }
        .form-container {
            background-color: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .form-section {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        .form-section h2 {
            color: #2c3e50;
            margin-top: 0;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        select, input[type="text"], input[type="number"], textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        .checkbox-group input {
            margin-right: 10px;
        }
        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        .submit-btn {
            background-color: #27ae60;
            color: white;
        }
        .reset-btn {
            background-color: #e74c3c;
            color: white;
        }
        .export-btn {
            background-color: #3498db;
            color: white;
        }
        .qr-section {
            text-align: center;
            margin: 20px 0;
        }
        .hidden {
            display: none;
        }
        .status-indicator {
            display: inline-block;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 5px;
        }
        .status-good {
            background-color: #2ecc71;
        }
        .status-bad {
            background-color: #e74c3c;
        }
        .status-na {
            background-color: #95a5a6;
        }
        .summary-section {
            margin-top: 30px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Forklift Pre-Use Inspection System</h1>
        <p>Complete this checklist before operating any forklift</p>
    </div>

    <div class="form-container">
        <div class="form-section">
            <h2>Forklift Information</h2>
            <div class="form-group">
                <label for="forklift-type">Forklift Type</label>
                <select id="forklift-type" onchange="toggleFuelSection()">
                    <option value="">Select forklift type</option>
                    <option value="electric">Electric Forklift</option>
                    <option value="gas">Gas Forklift</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="forklift-id">Forklift ID</label>
                <select id="forklift-id">
                    <option value="">Select forklift</option>
                    <option value="FL-1">Forklift 1</option>
                    <option value="FL-2">Forklift 2</option>
                    <option value="FL-3">Forklift 3</option>
                    <option value="FL-4">Forklift 4</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="shift">Shift</label>
                <select id="shift">
                    <option value="">Select shift</option>
                    <option value="AM">AM Shift</option>
                    <option value="PM">PM Shift</option>
                </select>
            </div>
            
            <div class="form-group" id="gas-section" style="display: none;">
                <label for="fuel-level">Fuel Level</label>
                <select id="fuel-level">
                    <option value="">Select fuel level</option>
                    <option value="full">Full</option>
                    <option value="3/4">3/4</option>
                    <option value="1/2">1/2</option>
                    <option value="1/4">1/4</option>
                    <option value="empty">Empty</option>
                </select>
            </div>
            
            <div class="form-group" id="electric-section" style="display: none;">
                <label for="battery-level">Battery Charge Level</label>
                <input type="number" id="battery-level" min="0" max="100" placeholder="Enter percentage (%)">
            </div>
            
            <div class="form-group">
                <label for="operator-name">Operator Name</label>
                <input type="text" id="operator-name" placeholder="Enter operator name">
            </div>
            
            <div class="form-group">
                <label for="hours-meter">Current Hours/Meter Reading</label>
                <input type="number" id="hours-meter" step="0.1" placeholder="Enter hours/meter reading">
            </div>
        </div>

        <div class="form-section">
            <h2>General Condition</h2>
            
            <div class="form-group">
                <label>Tires/Wheels Condition</label>
                <div class="checkbox-group">
                    <input type="checkbox" id="tires-good" name="tires" value="good">
                    <label for="tires-good">Good condition (no cracks, proper inflation)</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="tires-damaged" name="tires" value="damaged">
                    <label for="tires-damaged">Damaged/worn (needs repair)</label>
                </div>
            </div>
            
            <div class="form-group">
                <label>Forks Condition</label>
                <div class="checkbox-group">
                    <input type="checkbox" id="forks-good" name="forks" value="good">
                    <label for="forks-good">Good condition (no cracks, straight)</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="forks-damaged" name="forks" value="damaged">
                    <label for="forks-damaged">Damaged/bent (needs repair)</label>
                </div>
            </div>
            
            <div class="form-group">
                <label>Hydraulic System</label>
                <div class="checkbox-group">
                    <input type="checkbox" id="hydraulic-good" name="hydraulic" value="good">
                    <label for="hydraulic-good">No leaks, operates smoothly</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="hydraulic-leak" name="hydraulic" value="leak">
                    <label for="hydraulic-leak">Visible leaks or malfunction</label>
                </div>
            </div>
            
            <div class="form-group">
                <label>Chains & Cables</label>
                <div class="checkbox-group">
                    <input type="checkbox" id="chains-good" name="chains" value="good">
                    <label for="chains-good">Properly lubricated, no damage</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="chains-damaged" name="chains" value="damaged">
                    <label for="chains-damaged">Worn, damaged, or needs lubrication</label>
                </div>
            </div>
            
            <div class="form-group">
                <label>Safety Devices</label>
                <div class="checkbox-group">
                    <input type="checkbox" id="horn-working" name="safety" value="horn">
                    <label for="horn-working">Horn working properly</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="lights-working" name="safety" value="lights">
                    <label for="lights-working">Lights working properly</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="backup-alarm" name="safety" value="alarm">
                    <label for="backup-alarm">Backup alarm working</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="seatbelt-good" name="safety" value="seatbelt">
                    <label for="seatbelt-good">Seatbelt in good condition</label>
                </div>
            </div>
        </div>

        <div class="form-section">
            <h2>Electric Forklift Specific Checks</h2>
            <div id="electric-checks">
                <div class="form-group">
                    <label>Battery Condition</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="battery-good" name="battery" value="good">
                        <label for="battery-good">Properly charged, connections clean</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="battery-low" name="battery" value="low">
                        <label for="battery-low">Low charge, needs charging</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="battery-damaged" name="battery" value="damaged">
                        <label for="battery-damaged">Visible damage or corrosion</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Charger Condition</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="charger-good" name="charger" value="good">
                        <label for="charger-good">Charger in good condition</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="charger-damaged" name="charger" value="damaged">
                        <label for="charger-damaged">Charger damaged or malfunctioning</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-section">
            <h2>Gas Forklift Specific Checks</h2>
            <div id="gas-checks">
                <div class="form-group">
                    <label>Engine Oil Level</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="oil-good" name="oil" value="good">
                        <label for="oil-good">At proper level</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="oil-low" name="oil" value="low">
                        <label for="oil-low">Low, needs topping up</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Coolant Level</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="coolant-good" name="coolant" value="good">
                        <label for="coolant-good">At proper level</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="coolant-low" name="coolant" value="low">
                        <label for="coolant-low">Low, needs topping up</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Exhaust System</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="exhaust-good" name="exhaust" value="good">
                        <label for="exhaust-good">No leaks, properly attached</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="exhaust-leak" name="exhaust" value="leak">
                        <label for="exhaust-leak">Visible leaks or damage</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-section">
            <h2>Operational Checks</h2>
            <div class="form-group">
                <label>Steering</label>
                <div class="checkbox-group">
                    <input type="checkbox" id="steering-good" name="steering" value="good">
                    <label for="steering-good">Operates smoothly, no excessive play</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="steering-problem" name="steering" value="problem">
                    <label for="steering-problem">Hard to steer or excessive play</label>
                </div>
            </div>
            
            <div class="form-group">
                <label>Brakes</label>
                <div class="checkbox-group">
                    <input type="checkbox" id="brakes-good" name="brakes" value="good">
                    <label for="brakes-good">Hold properly, no dragging</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="brakes-problem" name="brakes" value="problem">
                    <label for="brakes-problem">Don't hold properly or drag</label>
                </div>
            </div>
            
            <div class="form-group">
                <label>Lift Mechanism</label>
                <div class="checkbox-group">
                    <input type="checkbox" id="lift-good" name="lift" value="good">
                    <label for="lift-good">Operates smoothly at all heights</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="lift-problem" name="lift" value="problem">
                    <label for="lift-problem">Jerky operation or won't lift</label>
                </div>
            </div>
            
            <div class="form-group">
                <label>Tilt Mechanism</label>
                <div class="checkbox-group">
                    <input type="checkbox" id="tilt-good" name="tilt" value="good">
                    <label for="tilt-good">Operates smoothly</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="tilt-problem" name="tilt" value="problem">
                    <label for="tilt-problem">Jerky operation or won't tilt</label>
                </div>
            </div>
        </div>

        <div class="form-section">
            <h2>Additional Notes</h2>
            <div class="form-group">
                <label for="notes">Any additional observations or comments</label>
                <textarea id="notes" rows="4" placeholder="Enter any additional notes here..."></textarea>
            </div>
            
            <div class="form-group">
                <label>Overall Inspection Status</label>
                <div class="checkbox-group">
                    <input type="radio" id="status-pass" name="status" value="pass">
                    <label for="status-pass">Pass - Forklift is safe to operate</label>
                </div>
                <div class="checkbox-group">
                    <input type="radio" id="status-fail" name="status" value="fail">
                    <label for="status-fail">Fail - Do not operate, tag out and report</label>
                </div>
            </div>
        </div>

        <div class="button-group">
            <button class="reset-btn" onclick="resetForm()">Reset Form</button>
            <button class="submit-btn" onclick="submitInspection()">Submit Inspection</button>
        </div>

        <div class="qr-section">
            <h3>Scan QR Code to Access This Form</h3>
            <div id="qr-code"></div>
            <p>Scan this code with any QR scanner to quickly access this inspection form</p>
        </div>

        <div class="button-group">
            <button class="export-btn" onclick="exportToExcel()">Export to Excel</button>
            <button class="export-btn" onclick="generatePDF()">Generate PDF Report</button>
        </div>

        <div id="summary-section" class="summary-section hidden">
            <h2>Inspection Summary</h2>
            <div id="summary-content"></div>
        </div>
    </div>

    <script>
        // QR Code generation
        function generateQRCode() {
            // In a real implementation, you would use a QR code library
            // For this example, we'll just show a placeholder
            document.getElementById('qr-code').innerHTML = 
                '<div style="width:150px;height:150px;margin:0 auto;background:#eee;display:flex;align-items:center;justify-content:center;">QR Code Placeholder</div>' +
                '<p style="text-align:center;margin-top:5px;">URL: ' + window.location.href + '</p>';
        }

        // Toggle between electric and gas specific sections
        function toggleFuelSection() {
            const forkliftType = document.getElementById('forklift-type').value;
            
            if (forkliftType === 'electric') {
                document.getElementById('electric-section').style.display = 'block';
                document.getElementById('gas-section').style.display = 'none';
                document.getElementById('electric-checks').style.display = 'block';
                document.getElementById('gas-checks').style.display = 'none';
            } else if (forkliftType === 'gas') {
                document.getElementById('electric-section').style.display = 'none';
                document.getElementById('gas-section').style.display = 'block';
                document.getElementById('electric-checks').style.display = 'none';
                document.getElementById('gas-checks').style.display = 'block';
            } else {
                document.getElementById('electric-section').style.display = 'none';
                document.getElementById('gas-section').style.display = 'none';
                document.getElementById('electric-checks').style.display = 'none';
                document.getElementById('gas-checks').style.display = 'none';
            }
        }

        // Submit inspection
        function submitInspection() {
            // Validate required fields
            const forkliftType = document.getElementById('forklift-type').value;
            const forkliftId = document.getElementById('forklift-id').value;
            const shift = document.getElementById('shift').value;
            const operatorName = document.getElementById('operator-name').value;
            const hoursMeter = document.getElementById('hours-meter').value;
            
            if (!forkliftType || !forkliftId || !shift || !operatorName || !hoursMeter) {
                alert('Please fill in all required fields (Forklift Type, Forklift ID, Shift, Operator Name, Hours/Meter)');
                return;
            }
            
            // Check if at least one status is selected
            const statusSelected = document.querySelector('input[name="status"]:checked');
            if (!statusSelected) {
                alert('Please select an overall inspection status (Pass/Fail)');
                return;
            }
            
            // Generate summary
            generateSummary();
            
            alert('Inspection submitted successfully!');
        }

        // Generate inspection summary
        function generateSummary() {
            const summaryContent = document.getElementById('summary-content');
            const summarySection = document.getElementById('summary-section');
            
            // Get all form values
            const forkliftType = document.getElementById('forklift-type').value;
            const forkliftId = document.getElementById('forklift-id').value;
            const shift = document.getElementById('shift').value;
            const operatorName = document.getElementById('operator-name').value;
            const hoursMeter = document.getElementById('hours-meter').value;
            const fuelLevel = forkliftType === 'gas' ? document.getElementById('fuel-level').value : 'N/A';
            const batteryLevel = forkliftType === 'electric' ? document.getElementById('battery-level').value + '%' : 'N/A';
            const notes = document.getElementById('notes').value;
            const status = document.querySelector('input[name="status"]:checked').value;
            
            // Get checkbox statuses
            const tiresStatus = document.querySelector('input[name="tires"]:checked') ? document.querySelector('input[name="tires"]:checked').value : 'Not checked';
            const forksStatus = document.querySelector('input[name="forks"]:checked') ? document.querySelector('input[name="forks"]:checked').value : 'Not checked';
            const hydraulicStatus = document.querySelector('input[name="hydraulic"]:checked') ? document.querySelector('input[name="hydraulic"]:checked').value : 'Not checked';
            const chainsStatus = document.querySelector('input[name="chains"]:checked') ? document.querySelector('input[name="chains"]:checked').value : 'Not checked';
            
            // Create summary HTML
            let summaryHTML = `
                <p><strong>Forklift ID:</strong> ${forkliftId}</p>
                <p><strong>Type:</strong> ${forkliftType === 'electric' ? 'Electric' : 'Gas'}</p>
                <p><strong>Shift:</strong> ${shift}</p>
                <p><strong>Operator:</strong> ${operatorName}</p>
                <p><strong>Hours/Meter:</strong> ${hoursMeter}</p>
                ${forkliftType === 'electric' ? 
                    `<p><strong>Battery Level:</strong> ${batteryLevel}</p>` : 
                    `<p><strong>Fuel Level:</strong> ${fuelLevel}</p>`}
                
                <h3>Inspection Details</h3>
                <p><span class="status-indicator ${tiresStatus === 'good' ? 'status-good' : 'status-bad'}"></span> <strong>Tires/Wheels:</strong> ${tiresStatus === 'good' ? 'Good condition' : 'Needs attention'}</p>
                <p><span class="status-indicator ${forksStatus === 'good' ? 'status-good' : 'status-bad'}"></span> <strong>Forks:</strong> ${forksStatus === 'good' ? 'Good condition' : 'Needs attention'}</p>
                <p><span class="status-indicator ${hydraulicStatus === 'good' ? 'status-good' : 'status-bad'}"></span> <strong>Hydraulic System:</strong> ${hydraulicStatus === 'good' ? 'No leaks' : 'Needs attention'}</p>
                <p><span class="status-indicator ${chainsStatus === 'good' ? 'status-good' : 'status-bad'}"></span> <strong>Chains & Cables:</strong> ${chainsStatus === 'good' ? 'Good condition' : 'Needs attention'}</p>
                
                <h3>Additional Notes</h3>
                <p>${notes || 'No additional notes'}</p>
                
                <h3>Overall Status: <span style="color: ${status === 'pass' ? 'green' : 'red'}">${status === 'pass' ? 'PASS - Safe to operate' : 'FAIL - Do not operate'}</span></h3>
                
                <p><em>Inspection completed on ${new Date().toLocaleString()}</em></p>
            `;
            
            summaryContent.innerHTML = summaryHTML;
            summarySection.classList.remove('hidden');
        }

        // Reset form
        function resetForm() {
            if (confirm('Are you sure you want to reset the form? All entered data will be lost.')) {
                document.getElementById('inspection-form').reset();
                document.getElementById('summary-section').classList.add('hidden');
                toggleFuelSection();
            }
        }

        // Export to Excel
        function exportToExcel() {
    // Get all form data
    const forkliftType = document.getElementById('forklift-type').value;
    const forkliftId = document.getElementById('forklift-id').value;
    const shift = document.getElementById('shift').value;
    const operatorName = document.getElementById('operator-name').value;
    const hoursMeter = document.getElementById('hours-meter').value;
    const fuelLevel = forkliftType === 'gas' ? document.getElementById('fuel-level').value : 'N/A';
    const batteryLevel = forkliftType === 'electric' ? document.getElementById('battery-level').value + '%' : 'N/A';
    const notes = document.getElementById('notes').value;
    const status = document.querySelector('input[name="status"]:checked') ? document.querySelector('input[name="status"]:checked').value : 'Not specified';
    
    // Get checkbox statuses
    const getCheckboxStatus = (name) => {
        const checked = document.querySelector(`input[name="${name}"]:checked`);
        return checked ? (checked.value === 'good' ? 'OK' : 'Needs Attention') : 'Not checked';
    };

    // Prepare the data for export
    const inspectionData = [
        {
            "Forklift ID": forkliftId,
            "Type": forkliftType === 'electric' ? 'Electric' : 'Gas',
            "Shift": shift,
            "Operator": operatorName,
            "Date": new Date().toLocaleDateString(),
            "Time": new Date().toLocaleTimeString(),
            "Hours/Meter": hoursMeter,
            "Fuel Level": fuelLevel,
            "Battery Level": batteryLevel,
            "Tires/Wheels": getCheckboxStatus('tires'),
            "Forks": getCheckboxStatus('forks'),
            "Hydraulic System": getCheckboxStatus('hydraulic'),
            "Chains & Cables": getCheckboxStatus('chains'),
            "Horn Working": document.getElementById('horn-working').checked ? 'Yes' : 'No',
            "Lights Working": document.getElementById('lights-working').checked ? 'Yes' : 'No',
            "Backup Alarm": document.getElementById('backup-alarm').checked ? 'Yes' : 'No',
            "Seatbelt Condition": document.getElementById('seatbelt-good').checked ? 'Good' : 'Needs Attention',
            "Overall Status": status === 'pass' ? 'Pass' : 'Fail',
            "Notes": notes
        }
    ];

    // Create a new workbook
    const wb = XLSX.utils.book_new();
    
    // Convert data to worksheet
    const ws = XLSX.utils.json_to_sheet(inspectionData);
    
    // Add worksheet to workbook
    XLSX.utils.book_append_sheet(wb, ws, "Inspection Report");
    
    // Generate filename with timestamp
    const filename = `Forklift_Inspection_${forkliftId}_${new Date().toISOString().slice(0,10)}.xlsx`;
    
    // Export the workbook
    XLSX.writeFile(wb, filename);
}

        // Generate PDF
      function generatePDF() {
    // Check if form has been submitted
    if (document.getElementById('summary-section').classList.contains('hidden')) {
        alert('Please submit the inspection first to generate a PDF report');
        return;
    }

    // Initialize jsPDF
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF({
        orientation: 'portrait',
        unit: 'mm',
        format: 'a4'
    });

    // Add title
    doc.setFontSize(20);
    doc.setTextColor(40);
    doc.setFont('helvetica', 'bold');
    doc.text('Forklift Pre-Use Inspection Report', 105, 20, { align: 'center' });

    // Add company logo (optional)
    // doc.addImage(logoData, 'JPEG', 10, 10, 30, 15);

    // Add inspection metadata
    doc.setFontSize(12);
    doc.setFont('helvetica', 'normal');
    
    const forkliftId = document.getElementById('forklift-id').value;
    const forkliftType = document.getElementById('forklift-type').value === 'electric' ? 'Electric' : 'Gas';
    const operatorName = document.getElementById('operator-name').value;
    const shift = document.getElementById('shift').value;
    const inspectionDate = new Date().toLocaleDateString();
    const inspectionTime = new Date().toLocaleTimeString();
    
    doc.text(`Forklift ID: ${forkliftId}`, 20, 40);
    doc.text(`Type: ${forkliftType}`, 20, 47);
    doc.text(`Operator: ${operatorName}`, 20, 54);
    doc.text(`Shift: ${shift}`, 20, 61);
    doc.text(`Date: ${inspectionDate}`, 110, 40);
    doc.text(`Time: ${inspectionTime}`, 110, 47);
    
    // Add horizontal line
    doc.setDrawColor(200);
    doc.line(20, 65, 190, 65);

    // Add inspection details section
    doc.setFontSize(14);
    doc.text('Inspection Details', 20, 75);
    
    doc.setFontSize(10);
    let yPosition = 85;
    
    // Function to add inspection items
    const addInspectionItem = (label, status, notes = '') => {
        doc.setFont('helvetica', 'bold');
        doc.text(`${label}:`, 20, yPosition);
        doc.setFont('helvetica', 'normal');
        
        // Status indicator
        doc.setFillColor(status === 'OK' ? '#27ae60' : '#e74c3c');
        doc.circle(50, yPosition - 1.5, 1.5, 'F');
        
        doc.text(status, 55, yPosition);
        
        if (notes) {
            doc.text(`Notes: ${notes}`, 80, yPosition);
        }
        
        yPosition += 7;
    };
    
    // Get status for each component
    const getStatus = (name) => {
        const checked = document.querySelector(`input[name="${name}"]:checked`);
        return checked ? (checked.value === 'good' ? 'OK' : 'Needs Attention') : 'Not Checked';
    };
    
    // Add inspection items
    addInspectionItem('Tires/Wheels', getStatus('tires'));
    addInspectionItem('Forks', getStatus('forks'));
    addInspectionItem('Hydraulic System', getStatus('hydraulic'));
    addInspectionItem('Chains & Cables', getStatus('chains'));
    
    // Safety devices
    addInspectionItem('Horn', document.getElementById('horn-working').checked ? 'OK' : 'Not Working');
    addInspectionItem('Lights', document.getElementById('lights-working').checked ? 'OK' : 'Not Working');
    addInspectionItem('Backup Alarm', document.getElementById('backup-alarm').checked ? 'OK' : 'Not Working');
    addInspectionItem('Seatbelt', document.getElementById('seatbelt-good').checked ? 'OK' : 'Needs Attention');
    
    // Forklift type specific checks
    if (document.getElementById('forklift-type').value === 'electric') {
        addInspectionItem('Battery', getStatus('battery'));
        addInspectionItem('Charger', getStatus('charger'));
    } else {
        addInspectionItem('Engine Oil', getStatus('oil'));
        addInspectionItem('Coolant', getStatus('coolant'));
        addInspectionItem('Exhaust System', getStatus('exhaust'));
    }
    
    // Operational checks
    addInspectionItem('Steering', getStatus('steering'));
    addInspectionItem('Brakes', getStatus('brakes'));
    addInspectionItem('Lift Mechanism', getStatus('lift'));
    addInspectionItem('Tilt Mechanism', getStatus('tilt'));

    // Add notes section
    const notes = document.getElementById('notes').value;
    if (notes) {
        yPosition += 5;
        doc.setFont('helvetica', 'bold');
        doc.text('Additional Notes:', 20, yPosition);
        doc.setFont('helvetica', 'normal');
        
        // Split notes into multiple lines if needed
        const splitNotes = doc.splitTextToSize(notes, 170);
        doc.text(splitNotes, 20, yPosition + 5);
        yPosition += 5 + (splitNotes.length * 5);
    }

    // Add overall status
    const status = document.querySelector('input[name="status"]:checked').value;
    yPosition += 10;
    doc.setFontSize(14);
    doc.setFont('helvetica', 'bold');
    doc.setTextColor(status === 'pass' ? '#27ae60' : '#e74c3c');
    doc.text(`Overall Status: ${status === 'pass' ? 'PASS - Safe to Operate' : 'FAIL - Do Not Operate'}`, 105, yPosition, { align: 'center' });
    
    // Add footer
    doc.setFontSize(8);
    doc.setTextColor(100);
    doc.text('Generated by Forklift Inspection System', 105, 290, { align: 'center' });
    doc.text(`Page 1 of 1`, 190, 290, { align: 'right' });

    // Save the PDF
    doc.save(`Forklift_Inspection_${forkliftId}_${new Date().toISOString().slice(0,10)}.pdf`);
}
    </script>
</body>
</html>